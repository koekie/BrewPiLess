<html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><meta name=viewport content="width=device-width,initial-scale=1"><title>BrewPiLess reporting for duty!</title><meta name=apple-mobile-web-app-title content=BrewPiLess><meta name=apple-mobile-web-app-capable content=yes><script>function invoke(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(200==n.status?e.success(n.responseText):n.onerror(n.status))},n.ontimeout=function(){void 0!==e.timeout?e.timeout():n.onerror(-1)},n.onerror=function(n){void 0!==e.fail&&e.fail(n)},n.open(e.m,e.url,!0),void 0!==e.data?(n.setRequestHeader("Content-Type",void 0!==e.mime?e.mime:"application/x-www-form-urlencoded"),n.send(e.data)):n.send()}var BWF={process:function(msg){if(null==this.raw)for(var key in eval("m={"+msg+"}"),m)void 0!==this.handlers[key]&&this.handlers[key](m[key]);else this.raw(msg)},on:function(n,e){this.handlers[n]=e},send:function(n){1==this.ws.readyState&&this.ws.send(n)},reconnecting:!1,status:function(){return void 0===this.ws?-1:1==this.ws.readyState?0:1},connect:function(){var e=this;if("undefined"!=typeof WebSocket){var n=new WebSocket("ws://"+document.location.host+"/ws");(e.ws=n).onopen=function(){console.log("Connected"),e.onconnect()},n.onclose=function(){e.reconnecting||(console.log("WS close"),e.error(-2),e.auto&&setTimeout(function(){e.reconnect()},5e3))},n.onmessage=function(n){e.process(n.data)}}else alert("Error! WebSocket Not Supported!")},reconnect:function(n){n=void 0!==n;var e=this;e.reconnecting||(n||1!=e.ws.readyState)&&(console.log("reconnect forced:"+n+" state:"+e.ws.readyState),e.reconnecting=!0,e.ws.close(),e.connect(),e.reconnecting=!1)},init:function(n){var e=this;e.error=void 0===n.error?function(){}:n.error,e.handlers=void 0===n.handlers?{}:n.handlers,e.raw=void 0===n.raw?null:n.raw,e.onconnect=void 0===n.onconnect?function(){}:n.onconnect,e.auto=void 0===n.reconnect||n.reconnect,e.connect()},save:function(n,e,o,t){invoke({m:"POST",url:"/fputs",data:"path="+n+"&content="+encodeURIComponent(e),success:function(){o()},fail:function(n){t(n)}})},load:function(n,e,o){invoke({m:"GET",url:n,success:function(n){e(n)},fail:function(n){o(n)}})}}</script></head><style>.lcddisplay{width:280px;height:90px;margin-left:auto;margin-right:auto;margin-top:5px;background:#000;background:-moz-linear-gradient(top,#000 2%,#2b2b2b 11%,#212121 54%,#212121 92%,#000 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(2%,#000),color-stop(11%,#2b2b2b),color-stop(54%,#212121),color-stop(92%,#212121),color-stop(100%,#000));background:-webkit-linear-gradient(top,#000 2%,#2b2b2b 11%,#212121 54%,#212121 92%,#000 100%);background:-o-linear-gradient(top,#000 2%,#2b2b2b 11%,#212121 54%,#212121 92%,#000 100%);background:-ms-linear-gradient(top,#000 2%,#2b2b2b 11%,#212121 54%,#212121 92%,#000 100%);background:linear-gradient(top,#000 2%,#2b2b2b 11%,#212121 54%,#212121 92%,#000 100%);-webkit-box-shadow:inset 1px 1px 5px #333;-moz-box-shadow:inset 1px 1px 5px #333;box-shadow:inset 1px 1px 5px #333;border:2px solid #333;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.lcddisplay .lcd-text{float:left;margin:5px 16px;font-size:16px}.lcd-line{float:left;clear:left;font-weight:400;font-style:normal;font-family:"Courier New",Courier,monospace;color:#ff0;white-space:pre}.dropdown{position:absolute;left:2px;top:2px;display:inline-block}.dropdown-content{display:none;position:absolute;background-color:#f9f9f9;min-width:160px;overflow:auto;box-shadow:0 8px 16px 0 rgba(0,0,0,.2)}.dropdown-content a{color:#000;padding:12px 16px;text-decoration:none;display:block;border:1px solid}.dropdown a:hover{background-color:#f1f1f1}.show{display:block}</style><script>var roomOfridge=!1;function simLcd(e){function t(e){if(e<-1e4)return" --.-";for(var t=(e/100).toFixed(1),n="",o=t.length;o<5;o++)n+=" ";return n+t}var n=[];return n[0]="Mode   "+{o:"Off",b:"Beer Const.",f:"Fridge Const.",p:"Beer Profile",i:"Invalid"}[e.md],n[1]="Beer  "+t(e.bt)+" "+t(e.bs)+" &deg;"+e.tu,-1e4<e.rt&&roomOfridge?n[2]="Room  "+t(e.rt)+" "+t(-2e4)+" &deg;"+e.tu:n[2]="Fridge"+t(e.ft)+" "+t(e.fs)+" &deg;"+e.tu,roomOfridge=!roomOfridge,n[3]=e.sl,n}function displayLcdText(e){for(var t=0;t<4;t++){var n=document.getElementById("lcd-line-"+t);n&&(n.innerHTML=e[t])}}function setLcdText(e,t){document.getElementById(e).innerHTML=t}function communicationError(){displayLcdText(["Failed to","connect to","Server",""])}function controllerError(){displayLcdText(["Controller not","updating data","...",""])}function resize(){var e=document.documentElement.clientWidth-20,t=(e-10)/2.8,n=t/4-10,o=document.getElementsByClassName("lcddisplay")[0];o.style.width=e+"px",o.style.height=t+"px",document.getElementsByClassName("lcd-text")[0].style.fontSize=parseInt(n)+"px"}function init(){resize(),window.addEventListener("resize",function(){resize()},!1),document.getElementById("lcd").onclick=function(){document.getElementById("myDropdown").classList.toggle("show"),event.stopPropagation()};BWF.init({onconnect:function(){},error:function(e){console.log("error"),communicationError()},handlers:{A:function(e){void 0!==e.sl&&displayLcdText(simLcd(e))}}})}window.onclick=function(e){var t,n=document.getElementsByClassName("dropdown-content");for(t=0;t<n.length;t++){var o=n[t];o.classList.contains("show")&&o.classList.remove("show")}}</script><body onload=init()><div id=lcd class=lcddisplay><span class=lcd-text><span class=lcd-line id=lcd-line-0>Mode Fridge Const.</span> <span class=lcd-line id=lcd-line-1>Beer --.- --.- °C</span> <span class=lcd-line id=lcd-line-2>Fridge 0.5 1.0 °C</span> <span class=lcd-line id=lcd-line-3>Idling for 01m49</span><p></p><p></p></span></div><div class=dropdown><div id=myDropdown class=dropdown-content><a href=/ >Main Page</a> <a href=/control.htm>Control</a> <a href=/logging.htm>Logs</a> <a href=/setup.htm>Device Setup</a> <a href=/config.htm>System Config</a> <a href=/gravity.htm>Gravity</a> <a href=/pressure.htm>Pressure</a></div></div></body></html>